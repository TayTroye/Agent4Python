#!/bin/bash




IDS5=(9996 9997 9998 9999 10000)
IDS10=(9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)
IDS15=(9986 9987 9988 9989 9990 9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)
IDS20=(9981 9982 9983 9984 9985 9986 9987 9988 9989 9990 9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)
IDS25=(9976 9977 9978 9979 9980 9981 9982 9983 9984 9985 9986 9987 9988 9989 9990 9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)
IDS30=(9971 9972 9973 9974 9975 9976 9977 9978 9979 9980 9981 9982 9983 9984 9985 9986 9987 9988 9989 9990 9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)
IDS35=(9966 9967 9968 9969 9970 9971 9972 9973 9974 9975 9976 9977 9978 9979 9980 9981 9982 9983 9984 9985 9986 9987 9988 9989 9990 9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)
IDS40=(9961 9962 9963 9964 9965 9966 9967 9968 9969 9970 9971 9972 9973 9974 9975 9976 9977 9978 9979 9980 9981 9982 9983 9984 9985 9986 9987 9988 9989 9990 9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)
IDS45=(9956 9957 9958 9959 9960 9961 9962 9963 9964 9965 9966 9967 9968 9969 9970 9971 9972 9973 9974 9975 9976 9977 9978 9979 9980 9981 9982 9983 9984 9985 9986 9987 9988 9989 9990 9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)
IDS50=(9951 9952 9953 9954 9955 9956 9957 9958 9959 9960 9961 9962 9963 9964 9965 9966 9967 9968 9969 9970 9971 9972 9973 9974 9975 9976 9977 9978 9979 9980 9981 9982 9983 9984 9985 9986 9987 9988 9989 9990 9991 9992 9993 9994 9995 9996 9997 9998 9999 10000)


DATASET=Video_Games
TOKEN=rqvae3x256_deep_128_ema/sentence-t5-base_256,256,256,256


CKPT_1L_5T=./ckpt/${DATASET}/Jan-19-2025_14-06-ab38cc/Jan-19-2025_14-06-ab38cc
CKPT_1L_10T=./ckpt/${DATASET}/Jan-18-2025_20-29-0bd077/Jan-18-2025_20-29-0bd077

CKPT_2L_5T=./ckpt/${DATASET}/Jan-19-2025_14-41-dc99dd/Jan-19-2025_14-41-dc99dd
CKPT_2L_10T=./ckpt/${DATASET}/Jan-18-2025_21-10-dcf44d/Jan-18-2025_21-10-dcf44d


CKPT_3L_5T=./ckpt/${DATASET}/Jan-19-2025_15-23-96082b/Jan-19-2025_15-23-96082b
CKPT_3L_10T=./ckpt/${DATASET}/Jan-18-2025_21-53-470901/Jan-18-2025_21-53-470901
CKPT_3L_15T=./ckpt/${DATASET}/Jan-18-2025_22-49-808db4/Jan-18-2025_22-49-808db4
CKPT_3L_20T=./ckpt/${DATASET}/Jan-18-2025_23-46-c5ee36/Jan-18-2025_23-46-c5ee36


CKPT_4L_10T=./ckpt/${DATASET}/Jan-18-2025_20-29-b611f4/Jan-18-2025_20-29-b611f4
CKPT_4L_15T=./ckpt/${DATASET}/Jan-18-2025_21-37-39856c/Jan-18-2025_21-37-39856c
CKPT_4L_20T=./ckpt/${DATASET}/Jan-18-2025_22-47-d68138/Jan-18-2025_22-47-d68138


CKPT_5L_15T=./ckpt/${DATASET}/Jan-18-2025_23-59-e1677d/Jan-18-2025_23-59-e1677d
CKPT_5L_20T=./ckpt/${DATASET}/Jan-19-2025_01-20-fcdef1/Jan-19-2025_01-20-fcdef1



CKPT_6L_15T=./ckpt/${DATASET}/Jan-18-2025_20-29-1c94e7/Jan-18-2025_20-29-1c94e7
CKPT_6L_20T=./ckpt/${DATASET}/Jan-18-2025_22-25-290c4e/Jan-18-2025_22-25-290c4e



CKPT_7L_20T=./ckpt/${DATASET}/Jan-19-2025_00-04-0ebdb3/Jan-19-2025_00-04-0ebdb3
CKPT_7L_25T=./ckpt/${DATASET}/Jan-18-2025_20-29-4c5fbe/Jan-18-2025_20-29-4c5fbe



CKPT_8L_20T=./ckpt/${DATASET}/Jan-18-2025_22-25-57df71/Jan-18-2025_22-25-57df71
CKPT_8L_25T=./ckpt/${DATASET}/Jan-19-2025_00-30-07f942/Jan-19-2025_00-30-07f942




L=8
echo "Best Test Layer ${L} ========================================================================================"
echo "Best Test Layer ${L} ========================================================================================"
echo "Best Test Layer ${L} ========================================================================================"



SUF=150.pth
CKPT=${CKPT_8L_25T}_${SUF}
IDS="${IDS25[@]}"
echo "Best Test CKPT_8L_25T ${SUF} ========================================================================================"


for sem_id in $IDS; do
      CUDA_VISIBLE_DEVICES=4,5,6,7 \
      accelerate launch \
          --main_process_port 21232 \
          --num_processes 4 main.py \
          --dataset=${DATASET} \
          --config_file=config/ftconfig_mnt.yaml \
          --token_prefix=${TOKEN} \
          --lr=0.0002 \
          --warmup_steps=0 \
          --num_layers=$L \
          --num_decoder_layers=$L \
          --epochs=100 \
          --pretrained_model=$CKPT \
          --sem_id_epochs=[$sem_id]
done


